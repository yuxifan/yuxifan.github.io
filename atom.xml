<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yuxi Fan</title>
  <subtitle>Yuxi&#39;s development blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.yuxifan.com/"/>
  <updated>2017-01-30T10:34:47.000Z</updated>
  <id>https://www.yuxifan.com/</id>
  
  <author>
    <name>Yuxi</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Parse Excel spreadsheet in Ruby</title>
    <link href="https://www.yuxifan.com/2017/01/29/parse-excel-spreadsheet-in-ruby/"/>
    <id>https://www.yuxifan.com/2017/01/29/parse-excel-spreadsheet-in-ruby/</id>
    <published>2017-01-29T02:10:12.000Z</published>
    <updated>2017-01-30T10:34:47.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/ruby/excel.png" alt="parse excel spreadsheet in Ruby"></p>
<p>First, install this gem: <a href="https://github.com/roo-rb/roo" rel="external nofollow" target="_blank">Roo</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem install roo</div></pre></td></tr></table></figure>
<p>Then, use classes/methods provided in Roo to access Excel data, e.g. there is my example to iterate Excel spreadsheet data.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># gem install roo</span></div><div class="line"></div><div class="line"><span class="keyword">require</span> <span class="string">'roo'</span></div><div class="line"></div><div class="line">xsl = Roo::Spreadsheet.open(<span class="string">'./test1.xlsx'</span>)</div><div class="line"></div><div class="line">xsl.sheets.each <span class="keyword">do</span> <span class="params">|sheet_name|</span></div><div class="line">  puts <span class="string">''</span></div><div class="line">  puts sheet_name</div><div class="line">  puts <span class="string">'--------------'</span></div><div class="line">  sheet = xsl.sheet(sheet_name)</div><div class="line"></div><div class="line">  <span class="keyword">if</span> !sheet.<span class="literal">nil</span>?</div><div class="line">    last_row    = sheet.last_row</div><div class="line">    last_column = sheet.last_column</div><div class="line"></div><div class="line">    <span class="keyword">if</span> !last_row.<span class="literal">nil</span>? <span class="keyword">and</span> !last_column.<span class="literal">nil</span>?</div><div class="line">      <span class="keyword">for</span> row <span class="keyword">in</span> <span class="number">1</span>..last_row</div><div class="line">        <span class="keyword">for</span> col <span class="keyword">in</span> <span class="number">1</span>..last_column</div><div class="line">          v = sheet.cell(row, col)</div><div class="line"></div><div class="line">          <span class="keyword">if</span> v.<span class="literal">nil</span>?</div><div class="line">            puts <span class="string">"NIL"</span></div><div class="line">          <span class="keyword">else</span></div><div class="line">            puts <span class="string">"["</span>+row.to_s+<span class="string">","</span>+col.to_s+<span class="string">"]: "</span> + sheet.cell(row, col)</div><div class="line">          <span class="keyword">end</span></div><div class="line">        <span class="keyword">end</span></div><div class="line">      <span class="keyword">end</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">      puts <span class="string">'Seems no data in sheet: '</span> + sheet_name</div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/ruby/excel.png&quot; alt=&quot;parse excel spreadsheet in Ruby&quot;&gt;&lt;/p&gt;
&lt;p&gt;First, install this gem: &lt;a href=&quot;https://github.com/roo-
    
    </summary>
    
      <category term="ruby" scheme="https://www.yuxifan.com/categories/ruby/"/>
    
    
      <category term="ruby" scheme="https://www.yuxifan.com/tags/ruby/"/>
    
      <category term="excel" scheme="https://www.yuxifan.com/tags/excel/"/>
    
      <category term="spreadsheet" scheme="https://www.yuxifan.com/tags/spreadsheet/"/>
    
  </entry>
  
  <entry>
    <title>SSL certificate error for rubygems.org and the fix</title>
    <link href="https://www.yuxifan.com/2017/01/27/ssl-certificate-problem-for-ruby-gems-and-solution/"/>
    <id>https://www.yuxifan.com/2017/01/27/ssl-certificate-problem-for-ruby-gems-and-solution/</id>
    <published>2017-01-27T02:10:12.000Z</published>
    <updated>2017-01-27T10:17:37.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/ruby/ssl.png" alt="SSL Certificate"></p>
<p>While running bundle install in my rails application, I have seen this error message:</p>
<p>Fetching source index from <a href="https://rubygems.org/" rel="external nofollow" target="_blank">https://rubygems.org/</a><br>Retrying fetcher due to error (2/4): Bundler::Fetcher::CertificateFailureError Could not verify the SSL certificate for <a href="https://rubygems.org/" rel="external nofollow" target="_blank">https://rubygems.org/</a>.<br>There is a chance you are experiencing a man-in-the-middle attack, but most likely your system doesn’t have the CA certificates needed for verification. For information about OpenSSL certificates, see <a href="http://bit.ly/ruby-ssl" rel="external nofollow" target="_blank">http://bit.ly/ruby-ssl</a>. To connect without using SSL, edit your Gemfile sources and change ‘https’ to ‘http’.<br>Retrying fetcher due to error (3/4): Bundler::Fetcher::CertificateFailureError Could not verify the SSL certificate for <a href="https://rubygems.org/" rel="external nofollow" target="_blank">https://rubygems.org/</a>.<br>There is a chance you are experiencing a man-in-the-middle attack, but most likely your system doesn’t have the CA certificates needed for verification. For information about OpenSSL certificates, see <a href="http://bit.ly/ruby-ssl" rel="external nofollow" target="_blank">http://bit.ly/ruby-ssl</a>. To connect without using SSL, edit your Gemfile sources and change ‘https’ to ‘http’.<br>Retrying fetcher due to error (4/4): Bundler::Fetcher::CertificateFailureError Could not verify the SSL certificate for <a href="https://rubygems.org/" rel="external nofollow" target="_blank">https://rubygems.org/</a>.<br>There is a chance you are experiencing a man-in-the-middle attack, but most likely your system doesn’t have the CA certificates needed for verification. For information about OpenSSL certificates, see <a href="http://bit.ly/ruby-ssl" rel="external nofollow" target="_blank">http://bit.ly/ruby-ssl</a>. To connect without using SSL, edit your Gemfile sources and change ‘https’ to ‘http’.<br>Could not verify the SSL certificate for <a href="https://rubygems.org/" rel="external nofollow" target="_blank">https://rubygems.org/</a>.<br>There is a chance you are experiencing a man-in-the-middle attack, but most likely your system doesn’t have the CA certificates needed for verification. For information about OpenSSL certificates, see <a href="http://bit.ly/ruby-ssl" rel="external nofollow" target="_blank">http://bit.ly/ruby-ssl</a>. To connect<br>without using SSL, edit your Gemfile sources and change ‘https’ to ‘http’.</p>
<p>Here is the solution for this problem:</p>
<h2 id="Update-gem-version"><a href="#Update-gem-version" class="headerlink" title="Update gem version"></a>Update gem version</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /var/tmp</div><div class="line">wget --no-check-certificate https://rubygems.org/downloads/rubygems-update-2.6.7.gem</div><div class="line">gem install --local /var/tmp/rubygems-update-2.6.7.gem</div><div class="line">update_rubygems --no-ri --no-rdoc</div></pre></td></tr></table></figure>
<p>Restart VM and try to run bundle install again.</p>
<h2 id="If-the-above-solution-is-not-working"><a href="#If-the-above-solution-is-not-working" class="headerlink" title="If the above solution is not working"></a>If the above solution is not working</h2><p>If this process does not work for you, you can try manually adding the new certificate.</p>
<h3 id="Step-1-Download-certificate-manually"><a href="#Step-1-Download-certificate-manually" class="headerlink" title="Step 1: Download certificate manually"></a>Step 1: Download certificate manually</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://raw.githubusercontent.com/rubygems/rubygems/master/lib/rubygems/ssl_certs/index.rubygems.org/GlobalSignRootCA.pem -O /var/tmp/GlobalSignRootCA.pem</div></pre></td></tr></table></figure>
<h3 id="Step-2-Locate-RubyGems-certificate-directory-in-your-installation"><a href="#Step-2-Locate-RubyGems-certificate-directory-in-your-installation" class="headerlink" title="Step 2: Locate RubyGems certificate directory in your installation"></a>Step 2: Locate RubyGems certificate directory in your installation</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gem <span class="built_in">which</span> rubygems</div><div class="line"><span class="built_in">cd</span> /home/yuxi/.rbenv/versions/2.3.1/lib/ruby/site_ruby/2.3.0/rubygems/ssl_certs/rubygems.org</div><div class="line">cp /var/tmp/GlobalSignRootCA.pem .</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/ruby/ssl.png&quot; alt=&quot;SSL Certificate&quot;&gt;&lt;/p&gt;
&lt;p&gt;While running bundle install in my rails application, I have seen this erro
    
    </summary>
    
      <category term="ruby" scheme="https://www.yuxifan.com/categories/ruby/"/>
    
    
      <category term="ruby" scheme="https://www.yuxifan.com/tags/ruby/"/>
    
      <category term="gem" scheme="https://www.yuxifan.com/tags/gem/"/>
    
      <category term="ssl" scheme="https://www.yuxifan.com/tags/ssl/"/>
    
  </entry>
  
  <entry>
    <title>Create a shared folder between VirtualBox host and guest</title>
    <link href="https://www.yuxifan.com/2017/01/11/create-shared-folder-in-virtualbox-vm/"/>
    <id>https://www.yuxifan.com/2017/01/11/create-shared-folder-in-virtualbox-vm/</id>
    <published>2017-01-11T09:51:12.000Z</published>
    <updated>2017-01-11T14:16:47.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/linux/shared-folder.jpg" alt="shared folder in VM"></p>
<p>(1) Configure a shared folder in VM settings</p>
<p>(2) Start VM box</p>
<p>(3) Click “Devices -&gt; Insert Guest Additions CD Image”</p>
<p>(4) Log in to the VM</p>
<p>(5) Mount CD-ROM:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo mount /dev/cdrom /media/cdrom</div><div class="line"><span class="built_in">cd</span> /media/cdrom</div></pre></td></tr></table></figure>
<p>(6) Install dependencies:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install -y dkms build-essential linux-headers-generic linux-headers-$(uname -r)</div></pre></td></tr></table></figure>
<p>(7)<br>Install Guest Additions</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo su -</div><div class="line">./VBoxLinuxAdditions.run</div></pre></td></tr></table></figure>
<p>(8)<br>Check that kernel extensions are up and running:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo modprobe vboxsf</div></pre></td></tr></table></figure>
<p>If cannot find vboxsf, run following commands:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/opt/VBoxGuestAdditions-4.3.30/init/vboxadd setup</div><div class="line">sudo apt-get install virtualbox-guest-utils</div><div class="line">sudo apt-get install virtualbox-guest-dkms</div></pre></td></tr></table></figure>
<p>(9) When get vboxsf working,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo mkdir /mnt/rubysrc</div><div class="line">mount -t vboxsf rubysrc /mnt/rubysrc</div></pre></td></tr></table></figure>
<p>(10) To do auto mount, edit /etc/fstab and add:<br>SharedFolder   /mnt/share  vboxsf defaults 0 0</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/linux/shared-folder.jpg&quot; alt=&quot;shared folder in VM&quot;&gt;&lt;/p&gt;
&lt;p&gt;(1) Configure a shared folder in VM settings&lt;/p&gt;
&lt;p&gt;(2) Star
    
    </summary>
    
      <category term="linux" scheme="https://www.yuxifan.com/categories/linux/"/>
    
    
      <category term="virtualbox" scheme="https://www.yuxifan.com/tags/virtualbox/"/>
    
  </entry>
  
  <entry>
    <title>Useful linux commands</title>
    <link href="https://www.yuxifan.com/2017/01/03/useful-linux-commands/"/>
    <id>https://www.yuxifan.com/2017/01/03/useful-linux-commands/</id>
    <published>2017-01-03T05:51:12.000Z</published>
    <updated>2017-01-04T09:57:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/linux/command-line.jpg" alt="Useful linux commands"></p>
<h2 id="Fix-typos-in-the-command-line"><a href="#Fix-typos-in-the-command-line" class="headerlink" title="Fix typos in the command line"></a>Fix typos in the command line</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dp *.txt /var/tmp</div><div class="line">^dp^cp</div></pre></td></tr></table></figure>
<h2 id="Find-commands-that-you-don’t-know"><a href="#Find-commands-that-you-don’t-know" class="headerlink" title="Find commands that you don’t know"></a>Find commands that you don’t know</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apropos <span class="string">"mount file"</span></div></pre></td></tr></table></figure>
<h2 id="Execute-command-from-bash-history"><a href="#Execute-command-from-bash-history" class="headerlink" title="Execute command from bash history"></a>Execute command from bash history</h2><p>Execute the last executed command<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">!!</div></pre></td></tr></table></figure></p>
<p>Execute the command with all the arguments passed to the previous command<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">!*</div></pre></td></tr></table></figure></p>
<p>Get the first argument of the last executed command<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">!ˆ</div></pre></td></tr></table></figure></p>
<p>Get the last argument of the last executed command<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">!$</div></pre></td></tr></table></figure></p>
<p>Execute the third command in bash history<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">!3</div></pre></td></tr></table></figure></p>
<h2 id="Use-comma-and-braces-to-simplify-commands"><a href="#Use-comma-and-braces-to-simplify-commands" class="headerlink" title="Use comma and braces to simplify commands"></a>Use comma and braces to simplify commands</h2><p>Backup system.yaml to system.bak<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp system.yaml&#123;,.bak&#125;</div></pre></td></tr></table></figure></p>
<p>Restore it<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv system.yaml&#123;.bak,&#125;</div></pre></td></tr></table></figure></p>
<p>Copy a file, with target filename with prefix ‘bak’<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp system.yaml bak-!<span class="comment">#^</span></div></pre></td></tr></table></figure></p>
<h2 id="Display-process-tree"><a href="#Display-process-tree" class="headerlink" title="Display process tree"></a>Display process tree</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ps -aux -forest</div></pre></td></tr></table></figure>
<p>Ncdu - ncurses disk usage analyzer<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install ncdu </div><div class="line">ncdu</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/linux/command-line.jpg&quot; alt=&quot;Useful linux commands&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Fix-typos-in-the-command-line&quot;&gt;&lt;a href=&quot;#Fix-typos-in-
    
    </summary>
    
      <category term="linux" scheme="https://www.yuxifan.com/categories/linux/"/>
    
    
      <category term="linux" scheme="https://www.yuxifan.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Sqlite3 command line</title>
    <link href="https://www.yuxifan.com/2016/12/23/sqlite3-command-line/"/>
    <id>https://www.yuxifan.com/2016/12/23/sqlite3-command-line/</id>
    <published>2016-12-23T02:10:12.000Z</published>
    <updated>2016-12-23T16:28:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/database/sqlite.png" alt="sqlite"></p>
<p>To load sqlite3 cli:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sqlite3 DB_NAME</div></pre></td></tr></table></figure>
<p>List tables:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.tables</div></pre></td></tr></table></figure>
<p>List all table schemas </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">.schema</div><div class="line">.schema TABLE_NAME</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/database/sqlite.png&quot; alt=&quot;sqlite&quot;&gt;&lt;/p&gt;
&lt;p&gt;To load sqlite3 cli:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=
    
    </summary>
    
      <category term="database" scheme="https://www.yuxifan.com/categories/database/"/>
    
    
      <category term="sqlite" scheme="https://www.yuxifan.com/tags/sqlite/"/>
    
  </entry>
  
  <entry>
    <title>Sending and receiving custom domain emails by mailgun and gmail</title>
    <link href="https://www.yuxifan.com/2016/12/14/sending-and-receiving-custom-domain-emails-by-mailgun-and-gmail/"/>
    <id>https://www.yuxifan.com/2016/12/14/sending-and-receiving-custom-domain-emails-by-mailgun-and-gmail/</id>
    <published>2016-12-14T09:51:12.000Z</published>
    <updated>2016-12-14T14:16:21.000Z</updated>
    
    <content type="html"><![CDATA[<p>Setting up a custom domain email address is widely discussed and there are lots of ways to do it, e.g. by using Zoho mail services. However, we have to say the most popular web mail client is Gmail. Gmail is fast, robust and awesome. Here is the way on how to use Mailgun and Gmail to send and receive emails without installing / configuring anything on your server!</p>
<p><img src="/images/linux/mailgun.jpg" alt="Mailgun"></p>
<h2 id="Create-a-mailgun-account"><a href="#Create-a-mailgun-account" class="headerlink" title="Create a mailgun account"></a>Create a mailgun account</h2><p>Register a mailgun account by using your gmail. <strong>Don’t use your custom email account</strong> (you want to create later within Mailgun) as it will cause trouble while validating your Mailgun account.</p>
<p>You may be asked to validating both your email address and a mobile number.</p>
<p>After validation, you will be presented with a dashboard. </p>
<p><img src="/images/linux/mailgun/1.jpg" alt="Mailgun"></p>
<h2 id="Add-a-domain"><a href="#Add-a-domain" class="headerlink" title="Add a domain"></a>Add a domain</h2><p>Now under “Domains”, click “Add New Domain”.</p>
<p>Follow the instructions and set your DNS records with whoever manages your DNS.</p>
<p>Here is my configurations:<br><img src="/images/linux/mailgun/2.jpg" alt="Mailgun"></p>
<h2 id="Create-email-address-under-custom-domain"><a href="#Create-email-address-under-custom-domain" class="headerlink" title="Create email address under custom domain"></a>Create email address under custom domain</h2><p>Click “Manage SMTP Credentials”, then click “New SMTP Credential”. Create your own email address.<br><img src="/images/linux/mailgun/3.jpg" alt="Mailgun"></p>
<h2 id="Add-routes"><a href="#Add-routes" class="headerlink" title="Add routes"></a>Add routes</h2><p>Click on the “Routes” link on the top to set up email forwarding.</p>
<p><img src="/images/linux/mailgun/4.jpg" alt="Mailgun"></p>
<p>The most simple route is to ‘Catch all’ emails to your domain and forward them to your gmail.</p>
<p>Now you can receive emails sending to the custom domain email address. </p>
<h2 id="Sending-within-Gmail"><a href="#Sending-within-Gmail" class="headerlink" title="Sending within Gmail"></a>Sending within Gmail</h2><p>Within Gmail, go to the Accounts tab and click “Add another email address you own”. Once you open this window, enter the email address you wish to send from.</p>
<p><img src="/images/linux/mailgun/5.jpg" alt="Mailgun"></p>
<p>Then click “Add Account”, now you’re done! As shown below, you can send emails from your custom domain email within Gmail!</p>
<p><img src="/images/linux/mailgun/6.jpg" alt="Mailgun"></p>
<p>Enjoy your free email service for up to 10,000 emails a month!</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Setting up a custom domain email address is widely discussed and there are lots of ways to do it, e.g. by using Zoho mail services. Howev
    
    </summary>
    
      <category term="linux" scheme="https://www.yuxifan.com/categories/linux/"/>
    
    
      <category term="gmail" scheme="https://www.yuxifan.com/tags/gmail/"/>
    
      <category term="mailgun" scheme="https://www.yuxifan.com/tags/mailgun/"/>
    
  </entry>
  
  <entry>
    <title>Ruby tutorials - rss</title>
    <link href="https://www.yuxifan.com/2016/11/28/ruby-tutorials-rss/"/>
    <id>https://www.yuxifan.com/2016/11/28/ruby-tutorials-rss/</id>
    <published>2016-11-28T02:10:12.000Z</published>
    <updated>2016-11-28T11:00:53.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/ruby/rss.png" alt="RSS"></p>
<h2 id="Install-gem"><a href="#Install-gem" class="headerlink" title="Install gem"></a>Install gem</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem install feedjira</div></pre></td></tr></table></figure>
<h2 id="Parse-RSS"><a href="#Parse-RSS" class="headerlink" title="Parse RSS"></a>Parse RSS</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'feedjira'</span></div><div class="line"></div><div class="line">feedurl = <span class="string">'https://www.yuxifan.com/atom.xml'</span></div><div class="line"></div><div class="line">feed = Feedjira::Feed.fetch_and_parse feedurl</div><div class="line"></div><div class="line">puts feed.title</div><div class="line">puts feed.url</div><div class="line">puts feed.entries.length</div><div class="line"></div><div class="line">feed.entries.each <span class="keyword">do</span> <span class="params">|item|</span></div><div class="line">  puts item.title</div><div class="line">  puts <span class="string">'------------'</span></div><div class="line">  puts item.url</div><div class="line">  puts <span class="string">' '</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/ruby/rss.png&quot; alt=&quot;RSS&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Install-gem&quot;&gt;&lt;a href=&quot;#Install-gem&quot; class=&quot;headerlink&quot; title=&quot;Install gem&quot;&gt;&lt;/a&gt;Ins
    
    </summary>
    
      <category term="ruby" scheme="https://www.yuxifan.com/categories/ruby/"/>
    
    
      <category term="ruby" scheme="https://www.yuxifan.com/tags/ruby/"/>
    
      <category term="rss" scheme="https://www.yuxifan.com/tags/rss/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu image manipulation commands</title>
    <link href="https://www.yuxifan.com/2016/11/25/image-manipulation-commands-in-ubuntu/"/>
    <id>https://www.yuxifan.com/2016/11/25/image-manipulation-commands-in-ubuntu/</id>
    <published>2016-11-25T05:51:12.000Z</published>
    <updated>2016-11-25T13:53:16.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/linux/image-tool/imagemagick.jpg" alt="image tool"></p>
<h2 id="Resize-image-and-convert"><a href="#Resize-image-and-convert" class="headerlink" title="Resize image (and convert)"></a>Resize image (and convert)</h2><p>First, install imagemagick:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update </div><div class="line">sudo apt-get install imagemagick --fix-missing</div></pre></td></tr></table></figure>
<p>Image resize command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">convert source.jpg -resize 200x100 target.jpg</div><div class="line">convert -resize 50% source.jpg target.png</div><div class="line">convert -resize 600x source.jpg target.jpg</div></pre></td></tr></table></figure></p>
<h2 id="Compress-or-Optimize-images"><a href="#Compress-or-Optimize-images" class="headerlink" title="Compress or Optimize images"></a>Compress or Optimize images</h2><p>For JPG images:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install jpegoptim</div><div class="line">jpegoptim test.jpg</div></pre></td></tr></table></figure></p>
<p>For PNG images:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install optipng</div><div class="line">optipng filename.png</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/linux/image-tool/imagemagick.jpg&quot; alt=&quot;image tool&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Resize-image-and-convert&quot;&gt;&lt;a href=&quot;#Resize-image-and-co
    
    </summary>
    
      <category term="linux" scheme="https://www.yuxifan.com/categories/linux/"/>
    
    
      <category term="linux" scheme="https://www.yuxifan.com/tags/linux/"/>
    
      <category term="image" scheme="https://www.yuxifan.com/tags/image/"/>
    
      <category term="imagemagick" scheme="https://www.yuxifan.com/tags/imagemagick/"/>
    
  </entry>
  
  <entry>
    <title>How to check available disk space and email a report in Ruby</title>
    <link href="https://www.yuxifan.com/2016/11/23/report-disk-space-in-ruby/"/>
    <id>https://www.yuxifan.com/2016/11/23/report-disk-space-in-ruby/</id>
    <published>2016-11-23T02:10:12.000Z</published>
    <updated>2016-11-23T10:36:45.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/ruby/diskspace.png" alt=""></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># gem install sys-filesystem</span></div><div class="line"><span class="comment"># gem install gmail</span></div><div class="line"></div><div class="line"><span class="keyword">require</span> <span class="string">'sys/filesystem'</span></div><div class="line"><span class="keyword">require</span> <span class="string">'gmail'</span></div><div class="line"></div><div class="line">threshold = <span class="number">9000</span></div><div class="line"></div><div class="line">stat = Sys::Filesystem.stat(<span class="string">"/"</span>)</div><div class="line">mb_available = stat.block_size * stat.blocks_available / <span class="number">1024</span> / <span class="number">1024</span></div><div class="line">mb_s = mb_available.to_s</div><div class="line">gb_s = (mb_available / <span class="number">1024</span>).to_s</div><div class="line">puts <span class="string">'Available space: '</span> + mb_s + <span class="string">' MB / '</span> + gb_s + <span class="string">' GB'</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> mb_available &lt; threshold</div><div class="line">  puts <span class="string">'Sending email ... '</span></div><div class="line">  user = <span class="string">"YOUR GMAIL"</span></div><div class="line">  pass = <span class="string">"PASSWORD"</span></div><div class="line">  gmail = Gmail.connect(user, pass)</div><div class="line">  email = gmail.compose <span class="keyword">do</span></div><div class="line">    to <span class="string">"XXXX@gmail.com"</span></div><div class="line">    subject <span class="string">"Your available disk space"</span></div><div class="line">    body <span class="string">"Space available: "</span> + mb_s + <span class="string">"MB / "</span> + gb_s + <span class="string">"GB"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  email.deliver!</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>You may want to add it into cron job list. </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/ruby/diskspace.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/
    
    </summary>
    
      <category term="ruby" scheme="https://www.yuxifan.com/categories/ruby/"/>
    
    
      <category term="ruby" scheme="https://www.yuxifan.com/tags/ruby/"/>
    
      <category term="ubuntu" scheme="https://www.yuxifan.com/tags/ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>QR code generator</title>
    <link href="https://www.yuxifan.com/2016/11/17/qrcode-generator/"/>
    <id>https://www.yuxifan.com/2016/11/17/qrcode-generator/</id>
    <published>2016-11-17T06:40:12.000Z</published>
    <updated>2016-11-17T15:49:44.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" media="all" href="/css/foundation.min.css">
<script type="text/javascript" src="/js/qrcode.min.js"></script>

<img src="/images/javascript/how-to-make-qrcode.jpg">

<br>

<div class="row">
  Enter url：<br>
  <input type="text" id="text" value="http://www.yuxifan.com" style="width: 600px; height: 30px;">
  <br>
  <div id="qrcode" style="width:150px; height:150px; margin-top:15px;"></div>
</div> 

<script type="text/javascript">
var qrcode = new QRCode(document.getElementById("qrcode"), {
	width : 150,
	height : 150
});

function makeCode () {		
	var elText = document.getElementById("text");
	
	if (!elText.value) {
		alert("Input a text");
		elText.focus();
		return;
	}
	
	qrcode.makeCode(elText.value);
}

makeCode();

$("#text").
	on("blur", function () {
		makeCode();
	}).
	on("keydown", function (e) {
		if (e.keyCode == 13) {
			makeCode();
		}
});
</script>
]]></content>
    
    <summary type="html">
    
      &lt;link rel=&quot;stylesheet&quot; media=&quot;all&quot; href=&quot;/css/foundation.min.css&quot;&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/js/qrcode.min.js&quot;&gt;&lt;/script&gt;

&lt;img sr
    
    </summary>
    
      <category term="tool" scheme="https://www.yuxifan.com/categories/tool/"/>
    
    
      <category term="QR code" scheme="https://www.yuxifan.com/tags/QR-code/"/>
    
  </entry>
  
  <entry>
    <title>How to implement a distributed Redis message processing system by using Redis / Resque in Rails</title>
    <link href="https://www.yuxifan.com/2016/11/15/implement-a-distributed-redis-message-processing-system-in-rails/"/>
    <id>https://www.yuxifan.com/2016/11/15/implement-a-distributed-redis-message-processing-system-in-rails/</id>
    <published>2016-11-15T09:51:12.000Z</published>
    <updated>2016-11-17T14:52:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>I’ve written a post introducing how to implement a distributed message processing system in standalone Ruby application. Now I will do the same, but in Rails.</p>
<h2 id="Architecture-design"><a href="#Architecture-design" class="headerlink" title="Architecture design"></a>Architecture design</h2><p><img src="/images/ruby/redis-architecture2.jpg" alt=""></p>
<h2 id="Add-dependencies"><a href="#Add-dependencies" class="headerlink" title="Add dependencies"></a>Add dependencies</h2><p>add it in Gemfile:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="string">'resque'</span></div></pre></td></tr></table></figure></p>
<p>Also, modify Rakefile:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">"resque"</span></div><div class="line"><span class="keyword">require</span> <span class="string">"resque/tasks"</span></div></pre></td></tr></table></figure></p>
<h2 id="Add-resque-web-admin-UI"><a href="#Add-resque-web-admin-UI" class="headerlink" title="Add resque web admin UI:"></a>Add resque web admin UI:</h2><p>In Gemfile:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="string">'resque-web'</span>, <span class="symbol">require:</span> <span class="string">'resque_web'</span></div></pre></td></tr></table></figure>
<p>Later you should be able to access it via: <a href="http://SERVER:PORT/resque" rel="external nofollow" target="_blank">http://SERVER:PORT/resque</a></p>
<h2 id="Define-a-worker-message-consumer"><a href="#Define-a-worker-message-consumer" class="headerlink" title="Define a worker (message consumer)"></a>Define a worker (message consumer)</h2><p>Add file app/workers/my_worker.rb<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyWorker</span></span></div><div class="line"></div><div class="line">  @queue = <span class="string">"mymessages"</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">perform</span><span class="params">(message)</span></span></div><div class="line">    puts <span class="string">"worker is processing job: <span class="subst">#&#123;message&#125;</span>"</span></div><div class="line">    </div><div class="line">	<span class="comment"># implement your logic here ...</span></div><div class="line">	</div><div class="line">    puts <span class="string">"Successfully processed: <span class="subst">#&#123;message&#125;</span>"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure></p>
<p>Don’t forget to update Rakefile:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">require_relative <span class="string">"app/workers/my_worker.rb"</span></div></pre></td></tr></table></figure>
<h2 id="Connect-to-your-remote-Redis-server-in-your-Rails-application"><a href="#Connect-to-your-remote-Redis-server-in-your-Rails-application" class="headerlink" title="Connect to your remote Redis server in your Rails application"></a>Connect to your remote Redis server in your Rails application</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RAILS_RESQUE_REDIS=YOUR_REDIS_SERVER_IP:PORT rails s -b0.0.0.0</div></pre></td></tr></table></figure>
<p>If you want to set up a basic HTTP authentication for your Resque web admin UI, run:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RESQUE_WEB_HTTP_BASIC_AUTH_USER=YOUR_USERNAME RESQUE_WEB_HTTP_BASIC_AUTH_PASSWORD=YOUR_PASSWORD RAILS_RESQUE_REDIS=YOUR_REDIS_SERVER_IP:PORT rails s -b0.0.0.0</div></pre></td></tr></table></figure>
<h2 id="To-load-the-worker"><a href="#To-load-the-worker" class="headerlink" title="To load the worker"></a>To load the worker</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RAILS_RESQUE_REDIS=YOUR_REDIS_SERVER_IP:PORT rake environment resque:work QUEUE=*</div></pre></td></tr></table></figure>
<p>Note: there is an additional parameter ‘environment’ which is required by Rails 5 (don’t know why - it just works)</p>
<h2 id="The-client-side-message-producer"><a href="#The-client-side-message-producer" class="headerlink" title="The client side (message producer)"></a>The client side (message producer)</h2><p>First, you need to copy over ‘MyWorker.rb’ to your client application, e.g. the message producer. </p>
<p>In the appropriate class, e.g. controller / actor class, add:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">require_relative <span class="string">'my_worker'</span></div></pre></td></tr></table></figure>
<p>Also, make a call to send message to Redis, which will be consumed by your worker later.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Resque.enqueue(MyWorker, your_message)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;I’ve written a post introducing how to implement a distributed message processing system in standalone Ruby application. Now I will do th
    
    </summary>
    
      <category term="ruby" scheme="https://www.yuxifan.com/categories/ruby/"/>
    
    
      <category term="ruby" scheme="https://www.yuxifan.com/tags/ruby/"/>
    
      <category term="redis" scheme="https://www.yuxifan.com/tags/redis/"/>
    
      <category term="rails" scheme="https://www.yuxifan.com/tags/rails/"/>
    
  </entry>
  
  <entry>
    <title>Convert between simplified Chinese and traditional Chinese</title>
    <link href="https://www.yuxifan.com/2016/11/15/simplified-chinese-traditional-chinese-converter/"/>
    <id>https://www.yuxifan.com/2016/11/15/simplified-chinese-traditional-chinese-converter/</id>
    <published>2016-11-15T06:40:12.000Z</published>
    <updated>2016-11-15T11:37:52.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" media="all" href="/css/foundation.min.css">
<script src="/js/gb-big5.js"></script>
<script src="/js/foundation.min.js"></script>

<img src="/images/javascript/gb-big5.jpg"><br>

<div class="row">
  <div class="large-10 large-offset-1">
      <div class="row">
        <div class="medium-4 columns">
          <label>From:
            <select id="source_lang">
              <option value="zh_TW">Traditional Chinese</option>
              <option value="zh_CN">Simplified Chinese</option>
            </select>
          </label>
        </div>
        <div class="medium-4 columns">
          <label>To:
            <select id="tar_lang">
              <option value="zh_CN">Simplified Chinese</option>
              <option value="zh_TW">Traditional Chinese</option>
            </select>
          </label>
        </div>
        <div class="medium-4 columns">
          <button class="button" id="trans">Convert</button>
        </div>
          
        </div>
	  Enter text to convert：
      <textarea id="content" style="width: 600px; height:200px;"></textarea>
	  
      <br>
      Result：
      <textarea id="res_content" style="width: 600px; height:200px;"></textarea>
  </div>
	  <div style="display:none;">
        Source language encoding：
        <textarea id="source_encode"></textarea>
        Target language encoding：
        <textarea id="tar_encode"></textarea>
	  </div>
  </div>  
<script>
  Trans.init(); 
</script> 
]]></content>
    
    <summary type="html">
    
      &lt;link rel=&quot;stylesheet&quot; media=&quot;all&quot; href=&quot;/css/foundation.min.css&quot;&gt;
&lt;script src=&quot;/js/gb-big5.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;/js/foundation.min.js
    
    </summary>
    
      <category term="tool" scheme="https://www.yuxifan.com/categories/tool/"/>
    
    
      <category term="Chinese converter" scheme="https://www.yuxifan.com/tags/Chinese-converter/"/>
    
  </entry>
  
  <entry>
    <title>How to trigger a cron job based on file modifications</title>
    <link href="https://www.yuxifan.com/2016/11/14/how-to-trigger-a-cron-job-based-on-file-modifications/"/>
    <id>https://www.yuxifan.com/2016/11/14/how-to-trigger-a-cron-job-based-on-file-modifications/</id>
    <published>2016-11-14T06:51:12.000Z</published>
    <updated>2016-11-14T10:21:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>Cron is an amazon tool that allowing Linux and Unix users to run commands or scripts at a given date and time. However, sometimes people want to trigger a job based on file modifications / creations. Here we can use incron to do this kinds of automation.</p>
<p><img src="/images/linux/incron.png" alt="incron"></p>
<h2 id="Incron-installation"><a href="#Incron-installation" class="headerlink" title="Incron installation"></a>Incron installation</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install incron</div></pre></td></tr></table></figure>
<h2 id="Using-Incron"><a href="#Using-Incron" class="headerlink" title="Using Incron"></a>Using Incron</h2><p>If /etc/incron.allow exists only users listed here may use incron. Otherwise if /etc/incron.deny exists only users NOT listed here may use incron. If none of these files exists everyone is allowed to use incron.</p>
<p>So firstly, we need to modify incron.allow to add users in:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano incron.allow</div></pre></td></tr></table></figure>
<p>Add users e.g. root, yuxi into the list:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">root</div><div class="line">yuxi</div></pre></td></tr></table></figure>
<p>Now we can list all incron jobs:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">incrontab <span class="_">-l</span></div></pre></td></tr></table></figure>
<p>Set up incron job for user ‘yuxi’</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">incrontab <span class="_">-e</span></div></pre></td></tr></table></figure>
<p>Add the following line to do an auto deployment to git repository:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/home/yuxi/website_src/ IN_MODIFY /home/yuxi/deploy_website.sh</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Cron is an amazon tool that allowing Linux and Unix users to run commands or scripts at a given date and time. However, sometimes people 
    
    </summary>
    
      <category term="linux" scheme="https://www.yuxifan.com/categories/linux/"/>
    
    
      <category term="linux" scheme="https://www.yuxifan.com/tags/linux/"/>
    
      <category term="incron" scheme="https://www.yuxifan.com/tags/incron/"/>
    
  </entry>
  
  <entry>
    <title>Upload files to Dropbox in Linux command line</title>
    <link href="https://www.yuxifan.com/2016/11/09/how-to-upload-files-to-dropbox-in-linux-command-line/"/>
    <id>https://www.yuxifan.com/2016/11/09/how-to-upload-files-to-dropbox-in-linux-command-line/</id>
    <published>2016-11-09T09:51:12.000Z</published>
    <updated>2016-11-10T14:25:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>Here is the instruction on how to upload files to your Dropbox without installing Dropbox:</p>
<p><img src="/images/windows/dropbox.png" alt=""></p>
<p>1) First, install the amazing <a href="https://github.com/andreafabrizi/Dropbox-Uploader" rel="external nofollow" target="_blank">Dropbox Uploader script</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/andreafabrizi/Dropbox-Uploader.git</div></pre></td></tr></table></figure></p>
<p>2) Open the following URL in your Browser, and log in using your account: <a href="https://www.dropbox.com/developers/apps" rel="external nofollow" target="_blank">https://www.dropbox.com/developers/apps</a></p>
<p>3) Click on “Create App”, then select “Dropbox API app”</p>
<p>4) As shown below, configure your dropbox app, choosing the app permissions and access restrictions to your DropBox folder”<br><img src="/images/linux/dropbox-app-conf.jpg" alt=""></p>
<p>5) Enter the “App Name” you like, e.g. YuxiUploader</p>
<p>6) Click on the “Create App” button</p>
<p>7) When your new App is successfully created, click on the Generate button. under the ‘Generated access token’ section, then copy and paste the new access token here to your Linux command line.</p>
<p>8) Now you are ready to upload files to your dropbox, e.g. </p>
<p>Upload file:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./dropbox_uploader.sh upload YOUR_LOCAL_FILE_NAME /</div></pre></td></tr></table></figure></p>
<p>List files:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">./dropbox_uploader.sh list</div><div class="line">./dropbox_uploader.sh list subfolder</div></pre></td></tr></table></figure></p>
<p>Download file:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./dropbox_uploader.sh download subfolder/1.pdf ./1.pdf</div></pre></td></tr></table></figure></p>
<p>Create a remote folder:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./dropbox_uploader.sh mkdir /subfolder</div></pre></td></tr></table></figure></p>
<p>Delete a remote folder<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./dropbox_uploader.sh delete /subfolder</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Here is the instruction on how to upload files to your Dropbox without installing Dropbox:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/windows/dropbox.png&quot; 
    
    </summary>
    
      <category term="linux" scheme="https://www.yuxifan.com/categories/linux/"/>
    
    
      <category term="dropbox" scheme="https://www.yuxifan.com/tags/dropbox/"/>
    
      <category term="linux" scheme="https://www.yuxifan.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Ruby gem command</title>
    <link href="https://www.yuxifan.com/2016/11/06/ruby-gem-command/"/>
    <id>https://www.yuxifan.com/2016/11/06/ruby-gem-command/</id>
    <published>2016-11-06T02:10:12.000Z</published>
    <updated>2016-11-07T11:09:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/ruby/gems.jpg" alt="Ruby Gems"></p>
<h2 id="Install-Ruby-gems-from-Github-source-repository"><a href="#Install-Ruby-gems-from-Github-source-repository" class="headerlink" title="Install Ruby gems from Github source repository"></a>Install Ruby gems from Github source repository</h2><p>To to this, you have to install a gem called specific_install first.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gem install specific_install</div><div class="line">gem specific_install https://github.com/XXX/YYY.git [BRANCH NAME]</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/ruby/gems.jpg&quot; alt=&quot;Ruby Gems&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Install-Ruby-gems-from-Github-source-repository&quot;&gt;&lt;a href=&quot;#Install-Ruby-gem
    
    </summary>
    
      <category term="ruby" scheme="https://www.yuxifan.com/categories/ruby/"/>
    
    
      <category term="ruby" scheme="https://www.yuxifan.com/tags/ruby/"/>
    
      <category term="gem" scheme="https://www.yuxifan.com/tags/gem/"/>
    
  </entry>
  
  <entry>
    <title>Two/multi phases XSLT processing</title>
    <link href="https://www.yuxifan.com/2016/11/04/multi-phases-xslt-processing/"/>
    <id>https://www.yuxifan.com/2016/11/04/multi-phases-xslt-processing/</id>
    <published>2016-11-04T09:51:12.000Z</published>
    <updated>2016-11-04T16:34:43.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/xslt/xsl.png" alt=""></p>
<p>Two/multi phases XSLT is very useful if you do have multiple steps to process your data. Here is an example.</p>
<p>I have a data dictionary to store authors:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">authors</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">author</span>&gt;</span>Wyatt, T.<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">author</span>&gt;</span>Smith, A.<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">author</span>&gt;</span>Davids, D.<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">authors</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Everytime when I’ve got a new XML document, I need to check a particular element (fullName) to update data dictionary file. The XML document looks like this:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">doc</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">creator</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fullName</span>&gt;</span>Wyatt, A.<span class="tag">&lt;/<span class="name">fullName</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">creator</span>&gt;</span></div><div class="line">  ...</div><div class="line"><span class="tag">&lt;/<span class="name">doc</span>&gt;</span></div></pre></td></tr></table></figure>
<p>While updating data dictionary, I need to make sure there is no duplicate getting into data dictionary. </p>
<p>Multi-phase processing can be used to do this job. The key point for multiphase processing is to store the previous processing result into a variable and use that variable as the initial XML to process in the later phase. The example XSLT is shown below:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">xsl:stylesheet</span> <span class="attr">version</span>=<span class="string">"1.0"</span></span></div><div class="line">      <span class="attr">xmlns:xsl</span>=<span class="string">"http://www.w3.org/1999/XSL/Transform"</span></div><div class="line">      <span class="attr">exclude-result-prefixes</span>=<span class="string">"xsl"</span>&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">xsl:strip-space</span> <span class="attr">elements</span>=<span class="string">"*"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">xsl:output</span> <span class="attr">method</span>=<span class="string">"xml"</span> <span class="attr">indent</span>=<span class="string">"yes"</span>/&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">xsl:variable</span> <span class="attr">name</span>=<span class="string">"authorsDoc"</span> <span class="attr">select</span>=<span class="string">"document('authors.xml', /)"</span>/&gt;</span></div><div class="line"> </div><div class="line">  <span class="tag">&lt;<span class="name">xsl:template</span> <span class="attr">match</span>=<span class="string">"/"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Phase 1 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">xsl:variable</span> <span class="attr">name</span>=<span class="string">"phase-1-output"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">authors</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- If the newly entered author does not exist in current data dictionary,</span></div><div class="line">               then add it to DD --&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">xsl:for-each</span> <span class="attr">select</span>=<span class="string">"/doc/creator/fullName[.!='']"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">xsl:variable</span> <span class="attr">name</span>=<span class="string">"currentName"</span> <span class="attr">select</span>=<span class="string">".[.=$authorsDoc//author]"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">xsl:if</span> <span class="attr">test</span>=<span class="string">"not($currentName)"</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">author</span>&gt;</span><span class="tag">&lt;<span class="name">xsl:value-of</span> <span class="attr">select</span>=<span class="string">"."</span>/&gt;</span><span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">xsl:if</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;/<span class="name">xsl:for-each</span>&gt;</span></div><div class="line">       </div><div class="line">        <span class="comment">&lt;!-- Copy all existing DD authors, only once --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">xsl:for-each</span> <span class="attr">select</span>=<span class="string">"$authorsDoc/authors/author[.!='']"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">xsl:sort</span> <span class="attr">select</span>=<span class="string">"."</span>/&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">author</span>&gt;</span><span class="tag">&lt;<span class="name">xsl:value-of</span> <span class="attr">select</span>=<span class="string">"."</span>/&gt;</span><span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">xsl:for-each</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">authors</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">xsl:variable</span>&gt;</span></div><div class="line"></div><div class="line">   <span class="comment">&lt;!-- Phase 2 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">authors</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">xsl:for-each</span> <span class="attr">select</span>=<span class="string">"$phase-1-output/authors/author[.!='' and (not(.=preceding-sibling::author))]"</span>&gt;</span>     <span class="comment">&lt;!-- Remove duplicates --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">xsl:sort</span> <span class="attr">select</span>=<span class="string">"."</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span><span class="tag">&lt;<span class="name">xsl:value-of</span> <span class="attr">select</span>=<span class="string">"."</span>/&gt;</span><span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">xsl:for-each</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">authors</span>&gt;</span></div><div class="line">   </div><div class="line">  <span class="tag">&lt;/<span class="name">xsl:template</span>&gt;</span></div><div class="line"> </div><div class="line"><span class="tag">&lt;/<span class="name">xsl:stylesheet</span>&gt;</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/xslt/xsl.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Two/multi phases XSLT is very useful if you do have multiple steps to process your data. H
    
    </summary>
    
      <category term="xslt" scheme="https://www.yuxifan.com/categories/xslt/"/>
    
    
      <category term="xslt" scheme="https://www.yuxifan.com/tags/xslt/"/>
    
  </entry>
  
  <entry>
    <title>How to configure a proxy server in ubuntu - step by step</title>
    <link href="https://www.yuxifan.com/2016/10/31/how-to-configure-a-proxy-server-in-ubuntu-step-by-step/"/>
    <id>https://www.yuxifan.com/2016/10/31/how-to-configure-a-proxy-server-in-ubuntu-step-by-step/</id>
    <published>2016-10-31T09:51:12.000Z</published>
    <updated>2016-11-01T10:10:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/linux/proxy-server.jpg" alt=""></p>
<p>Sometimes people wants to get access to their favorite websites while they are travelling. As some websites are blocked in some countries. Here is the step by step tutorial on how to configure a proxy server on ubuntu.</p>
<h2 id="Get-a-VPS-server"><a href="#Get-a-VPS-server" class="headerlink" title="Get a VPS server"></a>Get a VPS server</h2><p>First you need to get a VPS server up and running. I recommend <a href="http://bit.ly/2d1U9rx" rel="external nofollow" target="_blank">Vultr’s</a>  $5 plan. </p>
<h2 id="Install-server-software"><a href="#Install-server-software" class="headerlink" title="Install server software"></a>Install server software</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">apt install python-gevent python</div><div class="line">apt-get install python-pip</div><div class="line">pip install shadowsocks</div></pre></td></tr></table></figure>
<p>Then edit the configuration file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano /root/proxy/config.json</div></pre></td></tr></table></figure>
<p>The content  is:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;server&quot;:&quot;YOUR_VPS_IP&quot;,</div><div class="line">  &quot;server_port&quot;:8888,</div><div class="line">  &quot;local_port&quot;:1080,</div><div class="line">  &quot;password&quot;:&quot;YOUR_PROXY_SERVER_PASSWORD&quot;,</div><div class="line">  &quot;timeout&quot;:600,</div><div class="line">  &quot;method&quot;:&quot;aes-256-cfb&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Run server:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nohup ssserver -c /root/proxy/config.json</div></pre></td></tr></table></figure>
<h2 id="Configure-client-software"><a href="#Configure-client-software" class="headerlink" title="Configure client software"></a>Configure client software</h2><p>Download client from: <a href="https://shadowsocks.org/en/download/clients.html" rel="external nofollow" target="_blank">https://shadowsocks.org/en/download/clients.html</a></p>
<p>Configure proxy client as showing in the following screen dump:</p>
<p><img src="/images/linux/proxy-client.jpg" alt=""></p>
<p>Then right client the proxy client application icon in the task bar and tick ‘Enable system Proxy’</p>
<p><strong>Enjoy free browsing now!</strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/linux/proxy-server.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Sometimes people wants to get access to their favorite websites while they are t
    
    </summary>
    
      <category term="linux" scheme="https://www.yuxifan.com/categories/linux/"/>
    
    
      <category term="linux" scheme="https://www.yuxifan.com/tags/linux/"/>
    
      <category term="proxy server" scheme="https://www.yuxifan.com/tags/proxy-server/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu apt problem and solution</title>
    <link href="https://www.yuxifan.com/2016/10/24/ubuntu-apt-update-problems-and-solutions/"/>
    <id>https://www.yuxifan.com/2016/10/24/ubuntu-apt-update-problems-and-solutions/</id>
    <published>2016-10-24T08:51:12.000Z</published>
    <updated>2016-10-26T10:54:53.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/linux/apt.jpg" alt=""></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">While running sudo apt-get update, I was hitting this problem:</div><div class="line"></div><div class="line">W: An error occurred during the signature verification. The repository is not updated and the previous index files will be used. GPG error: http://apt.puppetlabs.com precise Release: The following signatures couldn<span class="string">'t be verified because the public key is not available: NO_PUBKEY 7F438280EF8D349F</span></div><div class="line"></div><div class="line">W: Failed to fetch http://apt.puppetlabs.com/dists/precise/Release</div><div class="line"></div><div class="line">W: Some index files failed to download. They have been ignored, or old ones used instead.</div></pre></td></tr></table></figure>
<p>The solution is to run the following commands:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys </div><div class="line">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7F438280EF8D349F</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/linux/apt.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;
    
    </summary>
    
      <category term="linux" scheme="https://www.yuxifan.com/categories/linux/"/>
    
    
      <category term="linux" scheme="https://www.yuxifan.com/tags/linux/"/>
    
      <category term="apt" scheme="https://www.yuxifan.com/tags/apt/"/>
    
  </entry>
  
  <entry>
    <title>Ruby tutorials - json</title>
    <link href="https://www.yuxifan.com/2016/10/17/ruby-tutorials-json/"/>
    <id>https://www.yuxifan.com/2016/10/17/ruby-tutorials-json/</id>
    <published>2016-10-17T01:10:12.000Z</published>
    <updated>2016-10-18T10:14:45.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/ruby/json-logo.png" alt="JSON"></p>
<h2 id="Generate-json-data"><a href="#Generate-json-data" class="headerlink" title="Generate json data"></a>Generate json data</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'json'</span></div><div class="line"></div><div class="line">doc1 = JSON <span class="string">'test1'</span> =&gt; <span class="number">12</span></div><div class="line">doc2 = JSON[<span class="string">'test2'</span> =&gt; <span class="number">12</span>]</div><div class="line"></div><div class="line">puts doc1</div><div class="line">puts doc2</div><div class="line"></div><div class="line">doc3 = JSON.generate [<span class="number">22</span>, <span class="number">23</span>, &#123;<span class="string">"a"</span>=&gt;<span class="number">55</span>&#125;, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">nil</span>, <span class="number">1</span>..<span class="number">12</span>]</div><div class="line">puts doc3</div><div class="line"></div><div class="line">doc4 = JSON.pretty_generate [<span class="number">22</span>, <span class="number">23</span>, &#123;<span class="string">"a"</span>=&gt;<span class="number">55</span>&#125;, <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">nil</span>, <span class="number">1</span>..<span class="number">12</span>]</div><div class="line">puts doc4</div></pre></td></tr></table></figure>
<h2 id="Parse-json"><a href="#Parse-json" class="headerlink" title="Parse json"></a>Parse json</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'json'</span></div><div class="line"></div><div class="line">json = JSON.parse <span class="string">'&#123;"foo":"bar", "ding":"dong"&#125;'</span></div><div class="line">puts json[<span class="string">"ding"</span>]</div><div class="line"></div><div class="line">str = <span class="string">'&#123;"desc":&#123;"key1":"value1","key2":"value2"&#125;,"content":&#123;"stats":&#123;"a":8,"b":12,"c":10&#125;&#125;&#125;'</span></div><div class="line">json2 = JSON.parse(str)</div><div class="line">puts json2[<span class="string">"desc"</span>][<span class="string">"key1"</span>]</div><div class="line">puts json2[<span class="string">"content"</span>][<span class="string">"stats"</span>][<span class="string">"b"</span>]</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/ruby/json-logo.png&quot; alt=&quot;JSON&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Generate-json-data&quot;&gt;&lt;a href=&quot;#Generate-json-data&quot; class=&quot;headerlink&quot; title=
    
    </summary>
    
      <category term="ruby" scheme="https://www.yuxifan.com/categories/ruby/"/>
    
    
      <category term="ruby" scheme="https://www.yuxifan.com/tags/ruby/"/>
    
      <category term="json" scheme="https://www.yuxifan.com/tags/json/"/>
    
  </entry>
  
  <entry>
    <title>Ruby tutorials - nokogiri</title>
    <link href="https://www.yuxifan.com/2016/10/16/ruby-tutorials-nokogiri/"/>
    <id>https://www.yuxifan.com/2016/10/16/ruby-tutorials-nokogiri/</id>
    <published>2016-10-16T08:51:12.000Z</published>
    <updated>2017-02-07T14:48:16.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/ruby/nokogiri.png" alt="nokogiri"></p>
<h2 id="The-XML-file"><a href="#The-XML-file" class="headerlink" title="The XML file"></a>The XML file</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">bookstore</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">book</span> <span class="attr">category</span>=<span class="string">"cooking"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span>Everyday Italian<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>Giada De Laurentiis<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">year</span>&gt;</span>2005<span class="tag">&lt;/<span class="name">year</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>30.00<span class="tag">&lt;/<span class="name">price</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">book</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">book</span> <span class="attr">category</span>=<span class="string">"children"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span>Harry Potter<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>J K. Rowling<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">year</span>&gt;</span>2005<span class="tag">&lt;/<span class="name">year</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>29.99<span class="tag">&lt;/<span class="name">price</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">book</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">book</span> <span class="attr">category</span>=<span class="string">"web"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span>XQuery Kick Start<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>James McGovern<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>Per Bothner<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>Kurt Cagle<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>James Linn<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>Vaidyanathan Nagarajan<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">year</span>&gt;</span>2003<span class="tag">&lt;/<span class="name">year</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>49.99<span class="tag">&lt;/<span class="name">price</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">book</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">book</span> <span class="attr">category</span>=<span class="string">"web"</span> <span class="attr">cover</span>=<span class="string">"paperback"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span>Learning XML<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>Erik T. Ray<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">year</span>&gt;</span>2003<span class="tag">&lt;/<span class="name">year</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>39.95<span class="tag">&lt;/<span class="name">price</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">book</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bookstore</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Read-from-file"><a href="#Read-from-file" class="headerlink" title="Read from file"></a>Read from file</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'nokogiri'</span></div><div class="line"></div><div class="line">doc = Nokogiri::XML(File.open(<span class="string">'books.xml'</span>))</div><div class="line"></div><div class="line">books = doc.xpath(<span class="string">'/bookstore/book'</span>)</div><div class="line"></div><div class="line">books.each <span class="keyword">do</span> <span class="params">|book|</span></div><div class="line">  puts <span class="string">'------------------'</span></div><div class="line">  puts <span class="string">'Category: '</span> + book.attr(<span class="string">'category'</span>)</div><div class="line">  puts <span class="string">'Title:    '</span> + book.xpath(<span class="string">'title'</span>)[<span class="number">0</span>].content</div><div class="line">  puts <span class="string">'Author:   '</span> + book.xpath(<span class="string">'author'</span>)[<span class="number">0</span>].content</div><div class="line">  puts <span class="string">'Year:     '</span> + book.xpath(<span class="string">'year'</span>)[<span class="number">0</span>].content</div><div class="line">  puts <span class="string">'Price:    '</span> + book.xpath(<span class="string">'price'</span>)[<span class="number">0</span>].content</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># return a single element</span></div><div class="line">cooking_book = doc.at_xpath(<span class="string">"/bookstore/book[@category='cooking']"</span>)</div><div class="line"></div><div class="line"><span class="comment"># Update content of an element</span></div><div class="line">cooking_book_author = cooking_book.xpath(<span class="string">'author'</span>)[<span class="number">0</span>]</div><div class="line">cooking_book_author.content = <span class="string">'David Robinson'</span></div></pre></td></tr></table></figure>
<h2 id="Read-from-string"><a href="#Read-from-string" class="headerlink" title="Read from string"></a>Read from string</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'nokogiri'</span></div><div class="line"></div><div class="line">doc = Nokogiri::XML(<span class="string">"&lt;staff_list&gt;&lt;staff&gt;&lt;name&gt;Paul&lt;/name&gt;&lt;/staff&gt;&lt;staff&gt;&lt;name&gt;Andrew&lt;/name&gt;&lt;/staff&gt;&lt;/staff_list&gt;"</span>)</div><div class="line"></div><div class="line">puts doc.root</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/ruby/nokogiri.png&quot; alt=&quot;nokogiri&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;The-XML-file&quot;&gt;&lt;a href=&quot;#The-XML-file&quot; class=&quot;headerlink&quot; title=&quot;The XML 
    
    </summary>
    
      <category term="ruby" scheme="https://www.yuxifan.com/categories/ruby/"/>
    
    
      <category term="ruby" scheme="https://www.yuxifan.com/tags/ruby/"/>
    
      <category term="nokogiri" scheme="https://www.yuxifan.com/tags/nokogiri/"/>
    
      <category term="tutorials" scheme="https://www.yuxifan.com/tags/tutorials/"/>
    
  </entry>
  
</feed>
