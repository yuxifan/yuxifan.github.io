!function(n,t){function e(t){return n("<section>").addClass("ins-section").append(n("<header>").addClass("ins-section-header").text(t))}function r(e,r,a,i,s){return n("<div>").addClass("ins-selectable").addClass("ins-search-item").append(n("<header>").append(n("<i>").addClass("fa").addClass("fa-"+e)).append(null!=r&&""!=r?r:t.TRANSLATION.UNTITLED).append(a?n("<span>").addClass("ins-slug").text(a):null)).append(i?n("<p>").addClass("ins-search-preview").text(i):null).attr("data-url",s)}function a(n,a){var i,s;if(0===a.length)return null;switch(i=t.TRANSLATION[n],n){case"POSTS":case"PAGES":s=a.map(function(n){return r("file",n.title,null,n.text.slice(0,150),t.ROOT_URL+n.path)});break;case"CATEGORIES":case"TAGS":s=a.map(function(t){return r("CATEGORIES"===n?"folder":"tag",t.name,t.slug,null,t.permalink)});break;default:return null}return e(i).append(s)}function i(n,t){var e={},r=n.pages.concat(n.posts);r.forEach(function(n){n[t]&&n[t].forEach(function(n){e[n.name]=n})});var a=[];for(var t in e)a.push(e[t]);return a}function s(n){return n.split(" ").filter(function(n){return!!n}).map(function(n){return n.toUpperCase()})}function o(n,t,e){var r=s(n),a=r.filter(function(n){var r=e.filter(function(e){return t.hasOwnProperty(e)?t[e].toUpperCase().indexOf(n)>-1?!0:void 0:!1});return r.length>0?!0:!1});return a.length===r.length}function c(n){return{POST:function(t){return o(n,t,["title","text"])},PAGE:function(t){return o(n,t,["title","text"])},CATEGORY:function(t){return o(n,t,["name","slug"])},TAG:function(t){return o(n,t,["name","slug"])}}}function u(n,t,e,r){var a=0;return s(n).forEach(function(n){var i=new RegExp(n,"img");e.forEach(function(n,e){if(t.hasOwnProperty(n)){var s=t[n].match(i);a+=s?s.length*r[e]:0}})}),a}function l(n){return{POST:function(t){return u(n,t,["title","text"],[3,1])},PAGE:function(t){return u(n,t,["title","text"],[3,1])},CATEGORY:function(t){return u(n,t,["name","slug"],[1,1])},TAG:function(t){return u(n,t,["name","slug"],[1,1])}}}function f(n,t){var e=l(t),r=c(t),a=n.posts,s=n.pages,o=i(n,"tags"),u=i(n,"categories");return{posts:a.filter(r.POST).sort(function(n,t){return e.POST(t)-e.POST(n)}).slice(0,5),pages:s.filter(r.PAGE).sort(function(n,t){return e.PAGE(t)-e.PAGE(n)}).slice(0,5),categories:u.filter(r.CATEGORY).sort(function(n,t){return e.CATEGORY(t)-e.CATEGORY(n)}).slice(0,5),tags:o.filter(r.TAG).sort(function(n,t){return e.TAG(t)-e.TAG(n)}).slice(0,5)}}function p(n){A.empty();for(var t in n)A.append(a(t.toUpperCase(),n[t]))}function h(n){if(0!==n.length){var t=C[0].clientHeight,e=n.position().top-C.scrollTop(),r=n[0].clientHeight+n.position().top;r>t+C.scrollTop()&&C.scrollTop(r-C[0].clientHeight),0>e&&C.scrollTop(n.position().top)}}function d(t){var e=n.makeArray(A.find(".ins-selectable")),r=-1;e.forEach(function(t,e){return n(t).hasClass("active")?(r=e,void 0):void 0});var a=(e.length+r+t)%e.length;n(e[r]).removeClass("active"),n(e[a]).addClass("active"),h(n(e[a]))}function v(n){n&&n.length&&(location.href=n.attr("data-url"))}var g=n(".ins-search"),T=g.find(".ins-search-input"),C=g.find(".ins-section-wrapper"),A=g.find(".ins-section-container");g.parent().remove(".ins-search"),n("body").append(g),n.getJSON(t.CONTENT_URL,function(t){"#ins-search"===location.hash.trim()&&g.addClass("show"),T.on("input",function(){var e=n(this).val();p(f(t,e))}),T.trigger("input")}),n(document).on("click focus",".search-form-input",function(){g.addClass("show"),g.find(".ins-search-input").focus()}).on("click",".ins-search-item",function(){v(n(this))}).on("click",".ins-close",function(){g.removeClass("show")}).on("keydown",function(n){if(g.hasClass("show"))switch(n.keyCode){case 27:g.removeClass("show");break;case 38:d(-1);break;case 40:d(1);break;case 13:v(A.find(".ins-selectable.active").eq(0))}})}(jQuery,window.INSIGHT_CONFIG);